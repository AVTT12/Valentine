<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anabel‚Ä¶ will you be my Valentine? üíò</title>
  <style>
    :root{
      --bg1:#fff0f6;
      --bg2:#ffe8f1;
      --card:#ffffffcc;
      --text:#2b2b2b;
      --yes:#ff3b7a;
      --yes2:#ff5a92;
      --no:#2b2b2b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      height:100vh;
      overflow:hidden;
      background: radial-gradient(1200px 700px at 20% 20%, var(--bg2), transparent 60%),
                  radial-gradient(1000px 600px at 80% 30%, #ffd6e7, transparent 55%),
                  linear-gradient(180deg, var(--bg1), #fff);
      display:grid;
      place-items:center;
    }
    .card{
      width:min(720px, 92vw);
      padding:28px 22px;
      border-radius:22px;
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid #ffffff;
      box-shadow: 0 18px 55px rgba(0,0,0,.10);
      position:relative;
      text-align:center;
    }
    h1{ margin:0 0 8px; font-size: clamp(28px, 4vw, 46px); letter-spacing:-0.02em; }
    .sub{ margin:0 0 18px; font-size: clamp(14px, 2.2vw, 18px); opacity:.85; }
    .gif{
      width:min(260px, 70vw);
      height:auto;
      margin: 10px auto 18px;
      border-radius:18px;
      box-shadow: 0 10px 24px rgba(0,0,0,.10);
      border: 1px solid rgba(255,255,255,.8);
      display:block;
    }
    .stage{
      position:relative;
      width:100%;
      height:120px;
      margin-top:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:14px;
      user-select:none;
    }
    button{
      border:none;
      padding:14px 18px;
      border-radius:16px;
      font-size:18px;
      font-weight:800;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      min-width: 150px;
      touch-action: manipulation;
    }
    #yesBtn{ background: linear-gradient(180deg, var(--yes2), var(--yes)); color:white; }
    #yesBtn:hover{ transform: translateY(-2px) scale(1.02); filter:saturate(1.1); }
    #noBtn{
      background: #fff;
      color: var(--no);
      border: 2px solid rgba(0,0,0,.12);
      position:absolute;
      left: calc(50% + 160px);
      top: 50%;
      transform: translate(-50%, -50%);
    }
    #noBtn:hover{ transform: translate(-50%, -50%) scale(1.02); }
    .hint{ margin-top:10px; font-size:14px; opacity:.78; min-height:20px; }

    .overlay{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(255, 240, 246, 0.82);
      backdrop-filter: blur(10px);
      z-index:10;
      overflow:hidden;
    }
    .overlay.show{ display:grid; }
    .success{
      width:min(760px, 92vw);
      padding:26px 22px;
      border-radius:22px;
      background:#ffffffd8;
      border:1px solid rgba(255,255,255,.9);
      box-shadow: 0 18px 55px rgba(0,0,0,.12);
      text-align:center;
      position:relative;
    }
    .success h2{ margin:0 0 8px; font-size: clamp(24px, 3.5vw, 40px); }
    .success p{ margin:0 0 14px; opacity:.86; }
    .row{ display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-top:10px; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(0,0,0,.08); background:#fff;
      font-weight:650; font-size:14px;
    }
    .linkBtn{
      background: #111; color:#fff; border-radius:14px;
      padding:12px 14px; font-size:16px; font-weight:850;
      box-shadow: 0 12px 24px rgba(0,0,0,.14);
      text-decoration:none; display:inline-block;
    }
    .linkBtn.alt{
      background: #fff; color:#111;
      border: 2px solid rgba(0,0,0,.12);
    }

    .heart{
      position:absolute;
      width:18px; height:18px;
      transform: rotate(45deg);
      background: #ff3b7a;
      opacity:0.9;
      animation: floatUp linear forwards;
      border-radius:4px;
      box-shadow: 0 8px 18px rgba(0,0,0,.12);
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      background:#ff3b7a;
      border-radius:50%;
    }
    .heart:before{ left:-9px; top:0; }
    .heart:after{ top:-9px; left:0; }

    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg) scale(1); opacity:0.95; }
      to{ transform: translateY(-120vh) rotate(45deg) scale(1.15); opacity:0; }
    }

    @media (max-width:520px){
      #noBtn{ left: calc(50% + 120px); }
      button{ min-width: 140px; }
    }
  </style>
</head>

<body>
  <div class="card" id="card">
    <h1>Anabel‚Ä¶ will you be my Valentine? üíò</h1>
    <p class="sub">Feb 14, 9‚Äì11 PM in Winnipeg. Hopefully you don‚Äôt pick up a shift then üò≠</p>

    <!-- swap this GIF if you want -->
    <img class="gif" alt="cute" src="https://media.giphy.com/media/l0MYC0LajbaPoEADu/giphy.gif" />

    <div class="stage" id="stage">
      <button id="yesBtn">Yes üòç</button>
      <button id="noBtn" aria-label="No">I‚Äôm working üò≠</button>
    </div>
    <div class="hint" id="hint"></div>
  </div>

  <div class="overlay" id="overlay">
    <div class="success">
      <h2>YAY Anabel üòç It‚Äôs a date üíû</h2>
      <p>Locked in: Feb 14, 9:00‚Äì11:00 PM. No picking up shifts üòå</p>

      <div class="row" id="detailsRow"></div>

      <div class="row" style="margin-top:14px">
        <a class="linkBtn" id="downloadIcs" href="#" download="valentines-date.ics">Add to Calendar (ICS)</a>
        <a class="linkBtn alt" id="googleCal" href="#" target="_blank" rel="noopener">Google Calendar</a>
      </div>

      <p style="margin-top:14px; font-size:14px; opacity:.75;">
        See you there üíò
      </p>
    </div>
  </div>

<script>
  // Winnipeg (Central Time). Times below are local (9‚Äì11 PM).
  const EVENT = {
    title: "Valentine‚Äôs Date with Anabel üíò",
    start: new Date("2026-02-14T21:00:00"),
    end:   new Date("2026-02-14T23:00:00"),
    location: "3338 Portage Avenue, Winnipeg, MB R3K 0Z1",
    description: "Anabel said yes üíò Hopefully you don‚Äôt pick up a shift then üò≠"
  };

  // "No" behavior escalation (fun, not mean)
  const noPhrases = [
    "Wait‚Ä¶ you‚Äôre really choosing a shift over me? üò≠",
    "Are you sure, Anabel? ü•∫",
    "Think about it again‚Ä¶ üòå",
    "Okay but‚Ä¶ what if I bring snacks? üëÄ",
    "Final answer?? üò≥"
  ];
  let noClicks = 0;

  const stage = document.getElementById("stage");
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const hint = document.getElementById("hint");
  const overlay = document.getElementById("overlay");

  function moveNoButton(awayFromX=null, awayFromY=null){
    const rect = stage.getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();
    const pad = 12;
    const w = btnRect.width;
    const h = btnRect.height;

    let x = pad + Math.random() * (rect.width - w - pad*2);
    let y = pad + Math.random() * (rect.height - h - pad*2);

    if (awayFromX !== null && awayFromY !== null){
      const px = awayFromX - rect.left;
      const py = awayFromY - rect.top;
      for(let i=0;i<8;i++){
        const tx = pad + Math.random() * (rect.width - w - pad*2);
        const ty = pad + Math.random() * (rect.height - h - pad*2);
        const d  = (tx - px)**2 + (ty - py)**2;
        const d2 = (x - px)**2 + (y - py)**2;
        if (d > d2){ x = tx; y = ty; }
      }
    }

    noBtn.style.left = (rect.left + x + w/2) + "px";
    noBtn.style.top  = (rect.top  + y + h/2) + "px";
    noBtn.style.transform = "translate(-50%, -50%)";
  }

  function initNoPos(){
    const rect = stage.getBoundingClientRect();
    noBtn.style.left = (rect.left + rect.width*0.72) + "px";
    noBtn.style.top  = (rect.top  + rect.height*0.5) + "px";
  }
  initNoPos();
  window.addEventListener("resize", initNoPos);

  // Desktop: dodge when cursor gets close
  window.addEventListener("mousemove", (e)=>{
    const btn = noBtn.getBoundingClientRect();
    const cx = btn.left + btn.width/2;
    const cy = btn.top + btn.height/2;
    const dist = Math.hypot(e.clientX - cx, e.clientY - cy);
    if (dist < 120){
      moveNoButton(e.clientX, e.clientY);
      hint.textContent = "Nice try üòå";
    }
  });

  // Mobile: dodge taps near it
  window.addEventListener("touchstart", (e)=>{
    const t = e.touches[0];
    const btn = noBtn.getBoundingClientRect();
    const cx = btn.left + btn.width/2;
    const cy = btn.top + btn.height/2;
    const dist = Math.hypot(t.clientX - cx, t.clientY - cy);
    if (dist < 140){
      moveNoButton(t.clientX, t.clientY);
      hint.textContent = "Nope üòá";
    }
  }, {passive:true});

  // If they manage to click the No button, escalate text + move it
  noBtn.addEventListener("click", ()=>{
    noClicks++;
    hint.textContent = noPhrases[Math.min(noClicks-1, noPhrases.length-1)];
    moveNoButton();
  });

  // Calendar helpers
  function toICSDate(dt){
    const z = new Date(dt.getTime() - dt.getTimezoneOffset()*60000);
    return z.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/, "Z");
  }

  function buildICS(){
    const uid = crypto?.randomUUID ? crypto.randomUUID() : (Date.now()+"@valentine");
    const dtStart = toICSDate(EVENT.start);
    const dtEnd   = toICSDate(EVENT.end);
    const now     = toICSDate(new Date());
    const esc = (s)=> String(s).replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/,/g,"\\,").replace(/;/g,"\\;");

    return [
      "BEGIN:VCALENDAR",
      "VERSION:2.0",
      "PRODID:-//Valentine Invite//EN",
      "CALSCALE:GREGORIAN",
      "METHOD:PUBLISH",
      "BEGIN:VEVENT",
      `UID:${uid}`,
      `DTSTAMP:${now}`,
      `DTSTART:${dtStart}`,
      `DTEND:${dtEnd}`,
      `SUMMARY:${esc(EVENT.title)}`,
      `LOCATION:${esc(EVENT.location)}`,
      `DESCRIPTION:${esc(EVENT.description)}`,
      "END:VEVENT",
      "END:VCALENDAR"
    ].join("\r\n");
  }

  function buildGoogleCalLink(){
    const fmt = (dt)=>{
      const z = new Date(dt.getTime() - dt.getTimezoneOffset()*60000);
      return z.toISOString().replace(/[-:]/g,"").replace(/\.\d{3}Z$/, "Z");
    };
    const dates = `${fmt(EVENT.start)}/${fmt(EVENT.end)}`;
    const params = new URLSearchParams({
      action: "TEMPLATE",
      text: EVENT.title,
      dates,
      details: EVENT.description,
      location: EVENT.location
    });
    return "https://calendar.google.com/calendar/render?" + params.toString();
  }

  function showDetails(){
    const row = document.getElementById("detailsRow");
    const niceStart = EVENT.start.toLocaleString([], {
      weekday:"long", year:"numeric", month:"long", day:"numeric",
      hour:"2-digit", minute:"2-digit"
    });
    const niceEnd = EVENT.end.toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
    row.innerHTML = `
      <span class="chip">üìÖ ${niceStart} ‚Äì ${niceEnd}</span>
      <span class="chip">üìç ${EVENT.location}</span>
    `;
  }

  function heartsBurst(){
    const count = 38;
    for(let i=0;i<count;i++){
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random() * window.innerWidth;
      const delay = Math.random() * 0.6;
      const dur = 2.8 + Math.random() * 2.2;
      const size = 10 + Math.random() * 18;

      h.style.left = left + "px";
      h.style.bottom = (-20 - Math.random()*80) + "px";
      h.style.animationDuration = dur + "s";
      h.style.animationDelay = delay + "s";
      h.style.width = size + "px";
      h.style.height = size + "px";

      document.body.appendChild(h);
      setTimeout(()=> h.remove(), (dur + delay) * 1000 + 200);
    }
  }

  yesBtn.addEventListener("click", ()=>{
    // Build downloadable ICS
    const ics = buildICS();
    const blob = new Blob([ics], {type: "text/calendar;charset=utf-8"});
    const url = URL.createObjectURL(blob);
    document.getElementById("downloadIcs").href = url;

    // Google Calendar link
    document.getElementById("googleCal").href = buildGoogleCalLink();

    // Show overlay + hearts
    showDetails();
    overlay.classList.add("show");
    heartsBurst();
    setInterval(heartsBurst, 2200);
  });
</script>
</body>
</html>